# ============================================================================
# 测试环境配置 (Test)
# ============================================================================

# 应用基础配置
NODE_ENV=test
PORT=8001
HOST=0.0.0.0
APP_NAME=Enterprise NestJS Backend Test
APP_VERSION=1.0.0
API_PREFIX=api/v1
TZ=Asia/Shanghai
APP_TIMEZONE=Asia/Shanghai

# CORS配置
ALLOWED_ORIGINS=http://localhost:8001,http://127.0.0.1:8001

# 数据库配置 (测试数据库)
DATABASE_URL=mysql://app_user:app_password@localhost:3306/enterprise_db_test
DB_HOST=localhost
DB_PORT=3306
DB_USERNAME=app_user
DB_PASSWORD=app_password
DB_DATABASE=enterprise_db_test
DB_LOGGING=false
DB_SYNCHRONIZE=false

# 缓存配置
# CACHE_TYPE: 缓存类型选择
#   - 'redis': 使用 Redis 缓存（推荐用于生产环境）
#   - 'memory': 使用内存缓存（仅用于开发/测试环境，分布式部署下数据不一致）
#   - 'auto': 自动选择，优先 Redis，失败时降级为内存缓存（推荐用于开发环境）
CACHE_TYPE=memory

# Redis配置
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=1
REDIS_KEY_PREFIX=enterprise:test:

# JWT配置
JWT_ACCESS_SECRET=test-super-secret-jwt-access-key-32-chars-minimum-length-required
JWT_REFRESH_SECRET=test-super-secret-jwt-refresh-key-32-chars-minimum-length-required
JWT_ACCESS_EXPIRES_IN=5m
JWT_REFRESH_EXPIRES_IN=1h
JWT_ISSUER=enterprise-nestjs-backend-test
JWT_AUDIENCE=enterprise-nestjs-backend-test

# 日志配置
LOG_LEVEL=error                   # 测试环境只记录错误
LOG_DIR=logs                      # 日志文件存储目录
LOG_MAX_SIZE=10m                  # 单个日志文件最大大小
LOG_MAX_FILES=7d                  # 日志文件保留时间
LOG_DATE_PATTERN=YYYY-MM-DD       # 日志文件日期格式
LOG_ZIPPED_ARCHIVE=false          # 测试环境不压缩
LOG_ENABLE_CONSOLE=true           # 输出到控制台（Docker 环境需要）

# 数据库日志配置
# 测试环境可选择性启用，用于集成测试验证
LOG_ENABLE_DATABASE=true          # 启用数据库日志
LOG_DB_RETENTION_DAYS=30          # 数据库日志保留天数

# 限流配置
THROTTLE_SHORT_TTL=1000           # 1秒
THROTTLE_SHORT_LIMIT=100          # 100次/秒（测试时大量请求）
THROTTLE_MEDIUM_TTL=60000         # 1分钟
THROTTLE_MEDIUM_LIMIT=1000        # 1000次/分钟
THROTTLE_LONG_TTL=3600000         # 1小时
THROTTLE_LONG_LIMIT=10000         # 10000次/小时

# 文件上传配置
MAX_FILE_SIZE=5242880
UPLOAD_DEST=./test-uploads
UPLOAD_ALLOWED_MIMETYPES=image/jpeg,image/png

# 安全配置
BCRYPT_ROUNDS=12
SESSION_SECRET=test-session-secret-key
CSRF_SECRET=test-csrf-secret-key
MAX_CONCURRENT_SESSIONS=5         # 最大并发登录设备数 (1-10, 设置为1实现单设备登录)

# 邮件配置 (测试环境禁用)
MAIL_HOST=
MAIL_PORT=587
MAIL_USER=
MAIL_PASS=
MAIL_FROM=test@enterprise.local

# 外部服务配置 (测试环境模拟)
SMS_API_KEY=test-key
SMS_API_SECRET=test-secret
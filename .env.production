# ============================================================================
# 生产环境配置 (Production)
# ============================================================================

# 应用基础配置
NODE_ENV=production
PORT=8000
HOST=0.0.0.0
APP_NAME=Enterprise NestJS Backend
APP_VERSION=1.0.0
API_PREFIX=api/v1
TZ=Asia/Shanghai
APP_TIMEZONE=Asia/Shanghai

# CORS配置 (生产环境需要严格配置)
ALLOWED_ORIGINS=https://yourdomain.com,https://admin.yourdomain.com

# 数据库配置 (生产环境请使用强密码)
DATABASE_URL=mysql://production_user:STRONG_PASSWORD_HERE@db-server:3306/enterprise_production
DB_HOST=db-server
DB_PORT=3306
DB_USERNAME=production_user
DB_PASSWORD=STRONG_PASSWORD_HERE
DB_DATABASE=enterprise_production
DB_LOGGING=false
DB_SYNCHRONIZE=false

# 缓存配置
# CACHE_TYPE: 缓存类型选择
#   - 'redis': 使用 Redis 缓存，连接失败时自动降级为内存缓存（推荐生产环境）
#   - 'memory': 强制使用内存缓存（分布式部署下会导致数据不一致，不推荐）
#   - 'auto': 自动选择，优先 Redis，失败时降级为内存缓存（推荐开发环境）
# 注意：生产环境建议确保 Redis 服务可用，避免降级为内存缓存导致分布式不一致
CACHE_TYPE=redis

# Redis配置 (生产环境请使用密码)
REDIS_HOST=redis-server
REDIS_PORT=6379
REDIS_PASSWORD=REDIS_STRONG_PASSWORD_HERE
REDIS_DB=0
REDIS_KEY_PREFIX=enterprise:prod:

# JWT配置 (生产环境必须使用强密钥)
JWT_ACCESS_SECRET=CHANGE_THIS_TO_VERY_STRONG_SECRET_AT_LEAST_64_CHARS_FOR_PRODUCTION_USE
JWT_REFRESH_SECRET=CHANGE_THIS_TO_VERY_STRONG_REFRESH_SECRET_AT_LEAST_64_CHARS_FOR_PRODUCTION
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d
JWT_ISSUER=enterprise-nestjs-backend
JWT_AUDIENCE=enterprise-nestjs-backend

# 日志配置
LOG_LEVEL=warn                    # 生产环境只记录警告和错误
LOG_DIR=/var/log/app              # 生产环境日志目录（Docker 或服务器路径）
LOG_MAX_SIZE=50m                  # 单个日志文件最大大小
LOG_MAX_FILES=30d                 # 日志文件保留时间
LOG_DATE_PATTERN=YYYY-MM-DD       # 日志文件日期格式
LOG_ZIPPED_ARCHIVE=true           # 生产环境压缩归档

# 数据库日志配置
# 生产环境建议全局禁用，只对关键接口启用（使用 @EnableDatabaseLog() 装饰器）
LOG_ENABLE_DATABASE=false         # 启用数据库日志
LOG_DB_RETENTION_DAYS=90          # 数据库日志保留天数

# 限流配置 (生产环境更严格)
THROTTLE_TTL=60
THROTTLE_LIMIT=100
REQUEST_TIMEOUT=30000

# 文件上传配置
MAX_FILE_SIZE=10485760
UPLOAD_DEST=/app/uploads
UPLOAD_ALLOWED_MIMETYPES=image/jpeg,image/png,image/webp,application/pdf

# 安全配置 (生产环境高强度)
BCRYPT_ROUNDS=12
SESSION_SECRET=PRODUCTION_SESSION_SECRET_STRONG_KEY_HERE
CSRF_SECRET=PRODUCTION_CSRF_SECRET_STRONG_KEY_HERE
MAX_CONCURRENT_SESSIONS=5         # 最大并发登录设备数 (1-10, 设置为1实现单设备登录)

# 邮件配置 (生产环境真实配置)
MAIL_HOST=smtp.yourdomain.com
MAIL_PORT=587
MAIL_USER=noreply@yourdomain.com
MAIL_PASS=MAIL_PASSWORD_HERE
MAIL_FROM=noreply@yourdomain.com

# 外部服务配置 (生产环境真实API)
SMS_API_KEY=PRODUCTION_SMS_API_KEY
SMS_API_SECRET=PRODUCTION_SMS_API_SECRET